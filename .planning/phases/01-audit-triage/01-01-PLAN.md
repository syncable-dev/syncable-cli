---
phase: 01-audit-triage
plan: 01
type: execute
---

<objective>
Create comprehensive inventory of all agent tools with metadata extraction.

Purpose: Establish baseline understanding of what tools exist, their purposes, and current implementation state before testing.
Output: TOOL-INVENTORY.md documenting all tools with structured metadata.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/codebase/ARCHITECTURE.md
@.planning/codebase/CONCERNS.md

**Tool files to inventory:**
@src/agent/tools/mod.rs
@src/agent/tools/analyze.rs
@src/agent/tools/background.rs
@src/agent/tools/compression.rs
@src/agent/tools/dclint.rs
@src/agent/tools/diagnostics.rs
@src/agent/tools/fetch.rs
@src/agent/tools/file_ops.rs
@src/agent/tools/hadolint.rs
@src/agent/tools/helmlint.rs
@src/agent/tools/k8s_costs.rs
@src/agent/tools/k8s_drift.rs
@src/agent/tools/k8s_optimize.rs
@src/agent/tools/kubelint.rs
@src/agent/tools/output_store.rs
@src/agent/tools/plan.rs
@src/agent/tools/prometheus_connect.rs
@src/agent/tools/prometheus_discover.rs
@src/agent/tools/retrieve.rs
@src/agent/tools/security.rs
@src/agent/tools/shell.rs
@src/agent/tools/terraform.rs
@src/agent/tools/truncation.rs

**Relevant codebase context:**
- Agent tools implement rig-core tool trait
- Tools are called by LLM agent during conversations
- Each tool has specific inputs, outputs, and dependencies
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract tool metadata from all tool files</name>
  <files>src/agent/tools/*.rs</files>
  <action>
Read each tool file and extract:
- Tool name (from struct name and tool definition)
- Description (from doc comments and tool description)
- Input parameters (from struct fields with serde attributes)
- Output format (from return type and tool_output)
- Internal dependencies (what other modules/crates it uses)
- External dependencies (what external services/APIs it calls)
- Complexity indicator (lines of code, async operations)

Focus on the public interface and tool trait implementation, not implementation details.
Use mod.rs to understand which tools are exported and how they're organized.
  </action>
  <verify>All 22+ tool files have been read and metadata extracted</verify>
  <done>Metadata extracted for every tool in src/agent/tools/</done>
</task>

<task type="auto">
  <name>Task 2: Create TOOL-INVENTORY.md with structured documentation</name>
  <files>.planning/phases/01-audit-triage/TOOL-INVENTORY.md</files>
  <action>
Create comprehensive inventory document with:

1. **Summary table** - Quick reference with: Tool Name | Purpose | Category | Complexity | External Dependencies
2. **Tool categories** - Group tools by function:
   - Analysis tools (analyze, security)
   - Kubernetes tools (k8s_optimize, k8s_costs, k8s_drift, prometheus_*)
   - Linting tools (dclint, hadolint, helmlint, kubelint)
   - File/IO tools (file_ops, fetch, shell)
   - Context management (compression, truncation, output_store, retrieve)
   - Planning/diagnostic (plan, diagnostics, background)
   - Infrastructure (terraform)
3. **Detailed tool profiles** - For each tool:
   - Name and description
   - Input parameters with types
   - Output format
   - Dependencies (internal and external)
   - Complexity notes
   - Known concerns (from CONCERNS.md if any)
4. **Dependency graph** - Which tools depend on other tools or shared modules
5. **Risk assessment** - Tools with external dependencies, complex async, or known fragility

Format for easy reference during testing phase.
  </action>
  <verify>TOOL-INVENTORY.md exists and contains all tools</verify>
  <done>Inventory document complete with all tools documented, categorized, and risk-assessed</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All tool files in src/agent/tools/ have been read
- [ ] TOOL-INVENTORY.md contains entry for every tool
- [ ] Tools are categorized by function
- [ ] External dependencies are identified
- [ ] Document is formatted for easy reference
</verification>

<success_criteria>

- All 22+ tools inventoried with consistent metadata
- Categories established for tool grouping
- External dependencies clearly identified
- Document ready to guide testing phase
</success_criteria>

<output>
After completion, create `.planning/phases/01-audit-triage/01-01-SUMMARY.md`:

# Phase 1 Plan 01: Tool Inventory Summary

**[One-liner describing what was discovered]**

## Accomplishments

- [Tools counted and categorized]
- [Key findings about tool organization]

## Files Created/Modified

- `.planning/phases/01-audit-triage/TOOL-INVENTORY.md` - Comprehensive tool inventory

## Decisions Made

[Any categorization decisions made]

## Issues Encountered

[Any tools that were confusing or poorly documented]

## Next Step

Ready for 01-02-PLAN.md (Testing Protocol & Results)
</output>
